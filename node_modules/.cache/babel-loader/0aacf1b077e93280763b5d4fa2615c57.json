{"ast":null,"code":"import _objectSpread from\"D:/React2/React Router/Practice v5/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/React2/React Router/Practice v5/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{Route,useParams,Link,useHistory,useLocation,useRouteMatch}from\"react-router-dom\";import Comments from\"../components/comments/Comments\";import HighlightedQuote from\"../components/quotes/HighlightedQuote\";import useHttp from\"../hooks/use-http\";import LoadingSpinner from\"../components/ui/LoadingSpinner\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var QuoteDetails=function QuoteDetails(){var params=useParams();var history=useHistory();var location=useLocation();var match=useRouteMatch();//////////\nvar _useHttp=useHttp(),isLoading=_useHttp.isLoading,error=_useHttp.error,getQuotes=_useHttp.requestFn;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),allQuots=_useState2[0],setAllQuots=_useState2[1];useEffect(function(){var transformData=function transformData(data){var loadedArray=[];Object.entries(data).map(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];return loadedArray.push({id:key,text:value.text,author:value.author});});setAllQuots(loadedArray);};getQuotes({url:\"https://react-router-fcb08-default-rtdb.firebaseio.com/quotes.json\"},transformData);},[getQuotes]);/////////\n// const quote = allQuots.find((quote) => quote.id === params.quoteId);\nvar _allQuots$filter=allQuots.filter(function(quote){return quote.id===params.quoteId;}),_allQuots$filter2=_slicedToArray(_allQuots$filter,1),quote=_allQuots$filter2[0];var targetQuote=_objectSpread({},quote);if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"centered\",children:/*#__PURE__*/_jsx(LoadingSpinner,{})});}if(error){return/*#__PURE__*/_jsx(\"p\",{className:\"centered focused\",children:error});}if(!error&&!isLoading&&targetQuote.text===\"\"){return/*#__PURE__*/_jsx(\"p\",{children:\"No Quote Found\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(HighlightedQuote,{text:targetQuote.text,author:targetQuote.author}),/*#__PURE__*/_jsx(Route,{path:\"\".concat(match.path),exact:true,children:/*#__PURE__*/_jsx(\"div\",{className:\"centered\",children:/*#__PURE__*/_jsx(Link,{className:\"btn--flat\",to:\"\".concat(match.url,\"/comments\"),children:\"Load Comments\"})})}),/*#__PURE__*/_jsx(Route,{path:\"\".concat(match.path,\"/comments\"),children:/*#__PURE__*/_jsx(Comments,{})})]});};export default QuoteDetails;","map":{"version":3,"names":["useEffect","useState","Route","useParams","Link","useHistory","useLocation","useRouteMatch","Comments","HighlightedQuote","useHttp","LoadingSpinner","QuoteDetails","params","history","location","match","isLoading","error","getQuotes","requestFn","allQuots","setAllQuots","transformData","data","loadedArray","Object","entries","map","key","value","push","id","text","author","url","filter","quote","quoteId","targetQuote","path"],"sources":["D:/React2/React Router/Practice v5/src/pages/QuoteDetails.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport {\r\n  Route,\r\n  useParams,\r\n  Link,\r\n  useHistory,\r\n  useLocation,\r\n  useRouteMatch,\r\n} from \"react-router-dom\";\r\nimport Comments from \"../components/comments/Comments\";\r\nimport HighlightedQuote from \"../components/quotes/HighlightedQuote\";\r\nimport useHttp from \"../hooks/use-http\";\r\nimport LoadingSpinner from \"../components/ui/LoadingSpinner\";\r\n\r\nconst QuoteDetails = () => {\r\n  const params = useParams();\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const match = useRouteMatch();\r\n  //////////\r\n  const { isLoading, error, requestFn: getQuotes } = useHttp();\r\n  const [allQuots, setAllQuots] = useState([]);\r\n  useEffect(() => {\r\n    const transformData = (data) => {\r\n      const loadedArray = [];\r\n      Object.entries(data).map(([key, value]) => {\r\n        return loadedArray.push({\r\n          id: key,\r\n          text: value.text,\r\n          author: value.author,\r\n        });\r\n      });\r\n      setAllQuots(loadedArray);\r\n    };\r\n    getQuotes(\r\n      {\r\n        url: \"https://react-router-fcb08-default-rtdb.firebaseio.com/quotes.json\",\r\n      },\r\n      transformData\r\n    );\r\n  }, [getQuotes]);\r\n  /////////\r\n  // const quote = allQuots.find((quote) => quote.id === params.quoteId);\r\n  const [quote] = allQuots.filter((quote) => quote.id === params.quoteId);\r\n  const targetQuote = { ...quote };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"centered\">\r\n        <LoadingSpinner />\r\n      </div>\r\n    );\r\n  }\r\n  if (error) {\r\n    return <p className=\"centered focused\">{error}</p>;\r\n  }\r\n  if (!error && !isLoading && targetQuote.text === \"\") {\r\n    return <p>No Quote Found</p>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <HighlightedQuote text={targetQuote.text} author={targetQuote.author} />\r\n      <Route path={`${match.path}`} exact>\r\n        <div className=\"centered\">\r\n          <Link className=\"btn--flat\" to={`${match.url}/comments`}>\r\n            Load Comments\r\n          </Link>\r\n        </div>\r\n      </Route>\r\n      {/* {location.pathname === `/all-quotes/${params.quoteId}` && (\r\n        <div className=\"centered\">\r\n          <Link\r\n            className=\"btn--flat\"\r\n            to={`/all-quotes/${params.quoteId}/comments`}\r\n          >\r\n            Load Comments\r\n          </Link>\r\n        </div>\r\n      )} */}\r\n      <Route path={`${match.path}/comments`}>\r\n        <Comments></Comments>\r\n      </Route>\r\n    </div>\r\n  );\r\n};\r\nexport default QuoteDetails;\r\n"],"mappings":"+OAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OACEC,KADF,CAEEC,SAFF,CAGEC,IAHF,CAIEC,UAJF,CAKEC,WALF,CAMEC,aANF,KAOO,kBAPP,CAQA,MAAOC,SAAP,KAAqB,iCAArB,CACA,MAAOC,iBAAP,KAA6B,uCAA7B,CACA,MAAOC,QAAP,KAAoB,mBAApB,CACA,MAAOC,eAAP,KAA2B,iCAA3B,C,wFAEA,GAAMC,aAAY,CAAG,QAAfA,aAAe,EAAM,CACzB,GAAMC,OAAM,CAAGV,SAAS,EAAxB,CACA,GAAMW,QAAO,CAAGT,UAAU,EAA1B,CACA,GAAMU,SAAQ,CAAGT,WAAW,EAA5B,CACA,GAAMU,MAAK,CAAGT,aAAa,EAA3B,CACA;AACA,aAAmDG,OAAO,EAA1D,CAAQO,SAAR,UAAQA,SAAR,CAAmBC,KAAnB,UAAmBA,KAAnB,CAAqCC,SAArC,UAA0BC,SAA1B,CACA,cAAgCnB,QAAQ,CAAC,EAAD,CAAxC,wCAAOoB,QAAP,eAAiBC,WAAjB,eACAtB,SAAS,CAAC,UAAM,CACd,GAAMuB,cAAa,CAAG,QAAhBA,cAAgB,CAACC,IAAD,CAAU,CAC9B,GAAMC,YAAW,CAAG,EAApB,CACAC,MAAM,CAACC,OAAP,CAAeH,IAAf,EAAqBI,GAArB,CAAyB,cAAkB,kCAAhBC,GAAgB,UAAXC,KAAW,UACzC,MAAOL,YAAW,CAACM,IAAZ,CAAiB,CACtBC,EAAE,CAAEH,GADkB,CAEtBI,IAAI,CAAEH,KAAK,CAACG,IAFU,CAGtBC,MAAM,CAAEJ,KAAK,CAACI,MAHQ,CAAjB,CAAP,CAKD,CAND,EAOAZ,WAAW,CAACG,WAAD,CAAX,CACD,CAVD,CAWAN,SAAS,CACP,CACEgB,GAAG,CAAE,oEADP,CADO,CAIPZ,aAJO,CAAT,CAMD,CAlBQ,CAkBN,CAACJ,SAAD,CAlBM,CAAT,CAmBA;AACA;AACA,qBAAgBE,QAAQ,CAACe,MAAT,CAAgB,SAACC,KAAD,QAAWA,MAAK,CAACL,EAAN,GAAanB,MAAM,CAACyB,OAA/B,EAAhB,CAAhB,sDAAOD,KAAP,sBACA,GAAME,YAAW,kBAAQF,KAAR,CAAjB,CAEA,GAAIpB,SAAJ,CAAe,CACb,mBACE,YAAK,SAAS,CAAC,UAAf,uBACE,KAAC,cAAD,IADF,EADF,CAKD,CACD,GAAIC,KAAJ,CAAW,CACT,mBAAO,UAAG,SAAS,CAAC,kBAAb,UAAiCA,KAAjC,EAAP,CACD,CACD,GAAI,CAACA,KAAD,EAAU,CAACD,SAAX,EAAwBsB,WAAW,CAACN,IAAZ,GAAqB,EAAjD,CAAqD,CACnD,mBAAO,qCAAP,CACD,CAED,mBACE,oCACE,KAAC,gBAAD,EAAkB,IAAI,CAAEM,WAAW,CAACN,IAApC,CAA0C,MAAM,CAAEM,WAAW,CAACL,MAA9D,EADF,cAEE,KAAC,KAAD,EAAO,IAAI,WAAKlB,KAAK,CAACwB,IAAX,CAAX,CAA8B,KAAK,KAAnC,uBACE,YAAK,SAAS,CAAC,UAAf,uBACE,KAAC,IAAD,EAAM,SAAS,CAAC,WAAhB,CAA4B,EAAE,WAAKxB,KAAK,CAACmB,GAAX,aAA9B,2BADF,EADF,EAFF,cAmBE,KAAC,KAAD,EAAO,IAAI,WAAKnB,KAAK,CAACwB,IAAX,aAAX,uBACE,KAAC,QAAD,IADF,EAnBF,GADF,CAyBD,CAvED,CAwEA,cAAe5B,aAAf"},"metadata":{},"sourceType":"module"}